# 路由

需要解决以下问题

- 如何找到对应的 worker
- 如何找到对应的 kite
- 如何调用到对应的函数

## 路由对象

```typescript
export interface Target {
  name?: string;
  id?: string | number;
  address?: number;
}
```

## 默认路由规则

### 如何找到对应的 worker

- address：通过 address % workers.length
- name: hash(name) % workers.length
- name + id:

  - `type(id) == string`: hash(id) % - workers.length
  - `type(id) == number`: id % - workers.length

### 如何找到/保存对应的 kite

```typescript
type IDKites = Map<number | string, Kite>;

kites: Map<Number, Kite> = new Map<Number, Kite>(); //[address] = kite
local_kites = new Map<string, IDKites>(); //[name] = IDKites
global_kites = new Map<string, number>(); //[name] = address
```

- address: 直接在 kites 中寻找
- name:先通过 name 在 `global_kites`中找出对应的 address,然后再从 kites 中寻找
- name+id:先在 local_kites 中通过 name 找出 IDKites,然后再通过 id 找出

## 别名路由
